<div class="container mx-auto px-4 py-8">
  <h1 class="summary-title"><%= t("summary.defaults.title") %></h1>
  <p class="summary-description">
    <%= t("summary.defaults.description") %>
  </p>

  <div class="summary-container">
    <%# This form will submit the selected board IDs to the 'create' action. %>
    <%= form_with(url: ai_path, method: :post) do |form| %>
      
      <fieldset class="mb-6">        
        <div class="flex items-start gap-4">
          <div class="relative w-80 max-w-full">
            <!-- Custom Multi-Select Dropdown -->
            <div class="multi-select-dropdown" 
                 data-controller="multi-select"
                 data-multi-select-default-text-value="<%= t("summary.defaults.dropdown-text") %>">
              <button type="button" 
                      class="dropwdown-button multi-select-button w-full p-3 flex items-center justify-between border"
                      data-multi-select-target="button"
                      data-action="click->multi-select#toggle">
                <span class="selected-text" data-multi-select-target="selectedText"><%= t("summary.defaults.dropdown-text") %></span>
                <svg class="w-5 h-5 ml-2 transition-transform duration-200" 
                     data-multi-select-target="arrow"
                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              
              <div class="multi-select-options dropwdown-options absolute z-10 w-full mt-1 hidden max-h-60 overflow-y-auto"
                   data-multi-select-target="options">
                <% @boards.each do |board| %>
                  <label class="flex items-center dropwdown-options-label">
                    <div class="relative">
                      <%= check_box_tag "board_ids[]", board.id, false, 
                          class: "absolute opacity-0 w-0 h-0",
                          data: { 
                            multi_select_target: "checkbox",
                            action: "change->multi-select#updateSelected"
                          } %>
                      <div class="dropwdown-checkbox" data-action="click->multi-select#toggleCheckbox">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-2.5 w-2.5 text-white hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                        </svg>
                      </div>
                    </div>
                    <span class="text-[var(--color-secondary)]"><%= board.name %></span>
                  </label>
                <% end %>
              </div>
            </div>
          </div>

          <%= form.submit t("summary.defaults.button-text"), class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg cursor-pointer whitespace-nowrap" %>

          <!-- Brain Icon -->
          <div class="flex-shrink-0 mt-3 ml-auto">
            <svg class="h-9 w-9 text-[var(--color-tertiary)]" fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <path d="M248,132a56.1211,56.1211,0,0,0-31.99951-50.61035L216,72a47.98283,47.98283,0,0,0-88-26.49316A47.98283,47.98283,0,0,0,40,71.99951l-.00049,9.39014A56.00268,56.00268,0,0,0,40,182.58569V184a47.98283,47.98283,0,0,0,88,26.49316A47.98283,47.98283,0,0,0,216,184v-1.41431A56.06726,56.06726,0,0,0,248,132ZM88,216a32.0433,32.0433,0,0,1-31.812-28.55664A56.1738,56.1738,0,0,0,64,188h8a8,8,0,0,0,0-16H64A40.00827,40.00827,0,0,1,50.66553,94.27393a7.99958,7.99958,0,0,0,5.33349-7.542L56,72a32,32,0,0,1,64,0v76.26147A47.80252,47.80252,0,0,0,88,136a8,8,0,0,0,0,16,32,32,0,0,1,0,64Zm104-44h-8a8,8,0,0,0,0,16h8a56.1738,56.1738,0,0,0,7.812-.55664A31.999,31.999,0,1,1,168,152a8,8,0,0,0,0-16,47.80252,47.80252,0,0,0-32,12.26147V72a32,32,0,1,1,64,.00049l.001,14.73144a7.99958,7.99958,0,0,0,5.33349,7.542A40.00827,40.00827,0,0,1,192,172ZM60,128a8,8,0,0,1,0-16A20.0226,20.0226,0,0,0,80,92V84a8,8,0,0,1,16,0v8A36.04061,36.04061,0,0,1,60,128Zm144-8a8.00008,8.00008,0,0,1-8,8,36.04061,36.04061,0,0,1-36-36V84a8,8,0,0,1,16,0v8a20.0226,20.0226,0,0,0,20,20A8.00008,8.00008,0,0,1,204,120Z"/>
            </svg>
          </div>
        </div>
      </fieldset>
    <% end %>

    <%# This Turbo Frame will be updated with the summary after the form submission. %>
    <%= turbo_frame_tag "summary_response", class: "mt-6" %>
  </div>
</div>